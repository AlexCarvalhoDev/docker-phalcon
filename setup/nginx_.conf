# For more information on configuration, see:
#   * Official English Documentation: http://nginx.org/en/docs/
#   * Official Russian Documentation: http://nginx.org/ru/docs/

user www-data;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
}

http {
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;

    # Load modular configuration files from the /etc/nginx/conf.d directory.
    # See http://nginx.org/en/docs/ngx_core_module.html#include
    # for more information.
    include /etc/nginx/conf.d/*.conf;

    index  index.html index.htm;

    server {
 listen 80 default_server;
 listen [::]:80 default_server;


 root /var/www/html;

 # Add index.php to the list if you are using PHP
 index index.html index.htm index.nginx-debian.html index.php ;

 server_name _;

 #location / {
  #      root /var/www/html/invo/public;
   #     index index.php;

    #    if (-f $request_filename) {
     #       break;
      #  }

       # if (!-e $request_filename) {
        #    rewrite ^(.+)$ /index.php?_url=$1 last;
         #   break;
        #}

location /subscriptioncontractonstatuschangedpush {
        rewrite ^/subscriptioncontractonstatuschangedpush/(.*)$ /tpaycore/subscriptioncontractonstatuschangedpush/$1;
}

location /tpaycore {
        rewrite ^/tpaycore/(.*)$ /tpaycore/public/index.php?_url=/$1;
    }



 # First attempt to serve request as file, then
 # as directory, then fall back to displaying a 404.
 #try_files $uri $uri/ =404;
# }

 # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
 #
 location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;
 
 }

 location ~* ^/(css|img|js|flv|swf|download)/(.+)$ {
        root /var/www/html/tpaycore/public;
    }



 # deny access to .htaccess files, if Apache's document root
 # concurs with nginx's one
 #
 location ~ /\.ht {
  deny all;
 }
}
server {
   listen 80;
   server_name zmobs.com www.zmobs.com;
   root /var/www/html/zmobs;
   index index.html index.php index.htm;
 if ($http_x_fb_http_engine = "Liger") {
 set $lp L;
 }
 if ($http_x_purpose = "preview") {
 set $lp "${lp}P";
 }
 if ($lp = "LP") {
 return 403 "Access denied due to Facebook's 'Liger preview' site hammering";
 }
   location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;

 }

  location = /robots.txt { log_not_found off; }
location = /favicon.ico { log_not_found off; }
location = /apple-touch-icon.png { log_not_found off; }


}
server {
   listen 80;
   server_name myastro.eg.zmobs.com www.myastro.eg.zmobs.com;
   root /var/www/html/zmobs/portals/myastro/ar;
   index index.html index.php index.htm;
 if ($http_x_fb_http_engine = "Liger") {
 set $lp L;
 }
 if ($http_x_purpose = "preview") {
 set $lp "${lp}P";
 }
 if ($lp = "LP") {
 return 403 "Access denied due to Facebook's 'Liger preview' site hammering";
 }
 location /z {
  rewrite ^/z/([a-zA-Z0-9-]*) /index.php?zmuak=$1;
}

 location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;

 }

  location = /robots.txt { log_not_found off; }
location = /favicon.ico { log_not_found off; }
location = /apple-touch-icon.png { log_not_found off; }


}

server {
   listen 80;
   server_name mobiplay.eg.zmobs.com www.mobiplay.eg.zmobs.com;
   root /var/www/html/zmobs/portals/mobiplay/ar;
   index index.html index.php index.htm;
 if ($http_x_fb_http_engine = "Liger") {
 set $lp L;
 }
 if ($http_x_purpose = "preview") {
 set $lp "${lp}P";
 }
 if ($lp = "LP") {
 return 403 "Access denied due to Facebook's 'Liger preview' site hammering";
 }
 location /z {
  rewrite ^/z/([a-zA-Z0-9-]*) /index.php?zmuak=$1;
}

 location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;

 }

  location = /robots.txt { log_not_found off; }
location = /favicon.ico { log_not_found off; }
location = /apple-touch-icon.png { log_not_found off; }


}

server {
   listen 80;
   server_name landingpage2.eg.myastro.zmobs.com www.landingpage2.eg.myastro.zmobs.com;
   root /var/www/html/zmobs/lp2;
   index index.html index.php index.htm;
 if ($http_x_fb_http_engine = "Liger") {
 set $lp L;
 }
 if ($http_x_purpose = "preview") {
 set $lp "${lp}P";
 }
 if ($lp = "LP") {
 return 403 "Access denied due to Facebook's 'Liger preview' site hammering";
 }

 location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;

 }

  location = /robots.txt { log_not_found off; }
location = /favicon.ico { log_not_found off; }
location = /apple-touch-icon.png { log_not_found off; }

}


server {
   listen 80;
   server_name landingpage3.eg.myastro.zmobs.com www.landingpage3.eg.myastro.zmobs.com;
   root /var/www/html/zmobs/lp3;
   index index.html index.php index.htm;
 if ($http_x_fb_http_engine = "Liger") {
 set $lp L;
 }
 if ($http_x_purpose = "preview") {
 set $lp "${lp}P";
 }
 if ($lp = "LP") {
 return 403 "Access denied due to Facebook's 'Liger preview' site hammering";
 }

 location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;

 }

  location = /robots.txt { log_not_found off; }
location = /favicon.ico { log_not_found off; }
location = /apple-touch-icon.png { log_not_found off; }

}

server {
   listen 80;
   server_name landingpage4.eg.myastro.zmobs.com www.landingpage4.eg.myastro.zmobs.com;
   root /var/www/html/zmobs/lps/myastro.4;
   index index.html index.php index.htm;
 if ($http_x_fb_http_engine = "Liger") {
 set $lp L;
 }
 if ($http_x_purpose = "preview") {
 set $lp "${lp}P";
 }
 if ($lp = "LP") {
 return 403 "Access denied due to Facebook's 'Liger preview' site hammering";
 }

 location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;

 }

  location = /robots.txt { log_not_found off; }
location = /favicon.ico { log_not_found off; }
location = /apple-touch-icon.png { log_not_found off; }

}

server {
   listen 80;
   server_name landingpage5.eg.myastro.zmobs.com www.landingpage5.eg.myastro.zmobs.com;
   root /var/www/html/zmobs/lps/myastro.1;
   index index.html index.php index.htm;
 if ($http_x_fb_http_engine = "Liger") {
 set $lp L;
 }
 if ($http_x_purpose = "preview") {
 set $lp "${lp}P";
 }
 if ($lp = "LP") {
 return 403 "Access denied due to Facebook's 'Liger preview' site hammering";
 }

 location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;

 }

  location = /robots.txt { log_not_found off; }
location = /favicon.ico { log_not_found off; }
location = /apple-touch-icon.png { log_not_found off; }

}

server {
   listen 80;
   server_name landingpage1.eg.myastro.zmobs.com www.landingpage1.eg.myastro.zmobs.com;
   root /var/www/html/zmobs/lps/myastro.1;
   index index.html index.php index.htm;
 if ($http_x_fb_http_engine = "Liger") {
 set $lp L;
 }
 if ($http_x_purpose = "preview") {
 set $lp "${lp}P";
 }
 if ($lp = "LP") {
 return 403 "Access denied due to Facebook's 'Liger preview' site hammering";
 }

 location ~ \.php$ {
 include snippets/fastcgi-php.conf;

 # With php7.0-cgi alone:
 # fastcgi_pass 127.0.0.1:9000;
 # With php7.0-fpm:
 fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index /index.php;
# fastcgi_split_path_info       ^(.+\.php)(/.+)$;

 }

  location = /robots.txt { log_not_found off; }
location = /favicon.ico { log_not_found off; }
location = /apple-touch-icon.png { log_not_found off; }

}





}
